(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},111:function(e,t,n){},113:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(9),c=n(8),l=n.n(c),o=(n(93),n(10)),u=n.n(o),i=n(15),p=n(13),m=n(78),d=n.n(m),E={url:"required|string|min:8|url",templateName:"required|string",version:"required|string"},f=function(e){var t=new d.a(e,E);return t.passes()?{valid:!0}:{valid:!1,errors:t.errors}},j=n(14),y=n(131),O=n(132),b=n(133),v=n(134),g=n(135),D=n(136),T=n(137),h=n(138),_=(n(101),n(11)),L="app/deployments/LOAD_DEPLOYMENTS",N="app/deployments/DEPLOYMENT_ADDED",S=function(){return{type:"app/deployments/FETCHING_DEPLOYMENTS"}},k=function(e){return{type:L,deployments:e}},A=function(e){return{type:"app/deployments/FAILED_TO_FETCH_DEPLOYMENTS",error:e}},x=function(e){return{type:"app/deployments/DELETING_DEPLOYMENT",deploymentId:e}},M=function(){return{type:"app/deployments/DEPLOYMENT_DELETED"}},P=function(){return{type:"app/deployments/FAILED_TO_DELETE_DEPLOYMENT"}};var w=function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),o=Object(p.a)(l,2),m=o[0],d=o[1],E=Object(a.useState)(""),L=Object(p.a)(E,2),S=L[0],k=L[1],A=Object(a.useState)([]),x=Object(p.a)(A,2),M=x[0],P=x[1],w=Object(a.useState)(""),C=Object(p.a)(w,2),I=C[0],F=C[1],Y=Object(s.c)((function(e){return{templatesLoading:e.deployments.get("loading"),templates:e.templates.get("list",Object(_.b)()),adding:e.deployments.get("adding",!1)}})),z=(Y.templatesLoading,Y.templates),G=Y.adding,H=Object(s.b)();Object(a.useEffect)((function(){var e=Object.keys((z||Object(_.b)()).toJS());d((function(){return e})),k((function(){return e[0]}))}),[z]),Object(a.useEffect)((function(){var e=z.get(S,Object(_.a)()).toJS();P((function(){return e})),F((function(){return e[0]}))}),[S]);var R=Object(a.useRef)(null),U=Object(a.useState)({url:""}),q=Object(p.a)(U,2),J=q[0],B=q[1],V=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,r,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(r=f(a={url:n,templateName:S,version:I})).valid){e.next=21;break}return B((function(){return{url:""}})),H({type:"app/deployments/ADDING_DEPLOYMENT"}),e.prev=6,e.next=9,fetch("".concat("","/api/deployments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 9:return s=e.sent,e.next=12,s.json();case 12:l=e.sent,200!==s.status?Object(j.b)(l.message):"SUCCESS"===l.status?(Object(j.b)("Deployment added successfully!"),H((o=l.data,{type:N,deployment:o})),c(""),k(m[0]),F(M[0])):(Object(j.b)(l.message),H({type:"app/deployments/FAILED_TO_ADD_DEPLOYMENT"})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),H({type:"app/deployments/FAILED_TO_ADD_DEPLOYMENT"});case 19:e.next=23;break;case 21:B((function(){return r.errors.errors})),r.errors&&r.errors.hasOwnProperty("url")&&null!==R.current&&R.current.focus();case 23:case"end":return e.stop()}var o}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"deployment-form col-lg-9"},r.a.createElement(y.a,{onSubmit:V},r.a.createElement(O.a,{row:!0},r.a.createElement(b.a,{for:"url",sm:3,md:2},"URL"),r.a.createElement(v.a,{sm:9,md:10},r.a.createElement(g.a,{type:"text",invalid:J&&!!J.url,placeholder:"Enter URL",innerRef:R,name:"url",value:n,onChange:function(e){return c(e.target.value)}}),r.a.createElement(D.a,null,J.url))),r.a.createElement(T.a,{form:!0},r.a.createElement(v.a,{md:8},r.a.createElement(O.a,{row:!0},r.a.createElement(b.a,{for:"templateName",sm:3,md:3},"Template Name"),r.a.createElement(v.a,{sm:9,md:8},r.a.createElement(g.a,{type:"select",name:"templateName",value:S,onChange:function(e){return k(e.target.value)}},m.map((function(e){return r.a.createElement("option",{key:e},e)})))))),r.a.createElement(v.a,{md:4},r.a.createElement(O.a,{row:!0},r.a.createElement(b.a,{for:"version",sm:3},"Version"),r.a.createElement(v.a,{sm:9},r.a.createElement(g.a,{type:"select",name:"version",value:I,onChange:function(e){return F(e.target.value)}},M.map((function(e){return r.a.createElement("option",{key:e},e)}))))))),r.a.createElement(h.a,{type:"submit",disabled:G,color:"info"},G?r.a.createElement("div",{className:"loader"}):"Add")))},C=n(139),I=n(142),F=n(140),Y=n(141),z=(n(102),n(79)),G=n.n(z);var H=function(){var e=Object(s.c)((function(e){return{loading:e.deployments.get("loading"),list:e.deployments.get("list")}})),t=e.loading,n=e.list,c=Object(a.useState)(!1),l=Object(p.a)(c,2),o=l[0],m=l[1],d=Object(a.useState)(""),E=Object(p.a)(d,2),f=E[0],y=E[1],O=Object(s.c)((function(e){return e.deployments.get("deletingDeployment")})),b=function(){o||y(""),m(!o)},v=Object(a.useRef)();Object(a.useEffect)((function(){f&&!O&&v.current!==O&&o&&b(),v.current=O}),[O,f]);var g=Object(s.b)();return r.a.createElement("div",{className:"deployment-list col-lg-9"},r.a.createElement(C.a,{striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"URL"),r.a.createElement("th",null,"Template Name"),r.a.createElement("th",null,"Version"),r.a.createElement("th",null,"DeployedAt"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t&&r.a.createElement("tr",null,r.a.createElement("td",{colSpan:5},r.a.createElement("div",{className:"loader"}))),!t&&0===n.size&&r.a.createElement("tr",null,r.a.createElement("td",{colSpan:5,className:"text-center"},"No records found.")),!t&&0!==n.size&&n.map((function(e){return r.a.createElement("tr",{key:e.get("_id")},r.a.createElement("td",null,e.get("url")),r.a.createElement("td",null,e.get("templateName")),r.a.createElement("td",null,e.get("version")),r.a.createElement("td",null,new Date(e.get("deployedAt")).toUTCString()),r.a.createElement("td",null,r.a.createElement(G.a,{className:"delete-icon",onClick:function(){b(),setTimeout((function(){return y((function(){return e.get("_id")}))}),500)}})))})))),r.a.createElement(I.a,{isOpen:o,toggle:b,centered:!0},r.a.createElement(F.a,null,"Are you sure you want to delete this deployment ?"),r.a.createElement(Y.a,null,r.a.createElement(h.a,{color:"primary",disabled:O,onClick:function(){var e;f&&g((e=f,function(){var t=Object(i.a)(u.a.mark((function t(n){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(x(e)),t.prev=1,t.next=4,fetch("".concat("","/api/deployments/").concat(e),{method:"DELETE"});case 4:return a=t.sent,t.next=7,a.json();case 7:if("SUCCESS"!==(r=t.sent).status){t.next=12;break}n(M()),t.next=13;break;case 12:throw new Error(r.message);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),Object(j.b)(t.t0.message),n(P());case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()))}},O?r.a.createElement("div",{className:"loader"}):"Confirm")," ",r.a.createElement(h.a,{color:"secondary",disabled:O,onClick:b},"Cancel"))))};n(111);var R=function(){return r.a.createElement("div",{className:"app-header"},r.a.createElement("header",null,"Deployment Version Logs"))},U=(n(112),"app/deployments/LOAD_TEMPLATES"),q=function(){return{type:"app/deployments/FETCHING_TEMPLATES"}},J=function(e){return{type:U,templates:e}},B=function(e){return{type:"app/deployments/FAILED_TO_FETCH_TEMPLATES",error:e}};n(113);var V=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){e(function(){var e=Object(i.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(q()),e.prev=1,e.next=4,fetch("".concat("","/api/templates"));case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,t(J(r.templates)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(B(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),e(function(){var e=Object(i.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(S()),e.prev=1,e.next=4,fetch("".concat("","/api/deployments"));case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,t(k(a.deployments)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),Object(j.b)(e.t0.message),t(A(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(R,null),r.a.createElement(j.a,null),r.a.createElement(w,null),r.a.createElement(H,null))},W=n(17),K=n(80),Q=Object(_.c)({list:[],loading:!0,error:"",adding:!1,deletingDeployment:null});var X=Object(_.c)({list:[],loading:!0,error:""});var Z=Object(W.c)({deployments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/deployments/FETCHING_DEPLOYMENTS":return e.set("loading",!0).set("error","");case L:return e.set("loading",!1).set("list",Object(_.c)(t.deployments));case"app/deployments/FAILED_TO_FETCH_DEPLOYMENTS":return e.set("loading",!1).set("error",t.error.message);case"app/deployments/ADDING_DEPLOYMENT":return e.set("adding",!0);case N:return e.set("adding",!1).update("list",(function(e){return e.unshift(Object(_.c)(t.deployment))}));case"app/deployments/FAILED_TO_ADD_DEPLOYMENT":return e.set("adding",!1);case"app/deployments/DELETING_DEPLOYMENT":return e.set("deletingDeployment",t.deploymentId);case"app/deployments/DEPLOYMENT_DELETED":var n=e.get("deletingDeployment");return e.set("deletingDeployment",null).update("list",(function(e){return e.filter((function(e){return e.get("_id")!==n}))}));case"app/deployments/FAILED_TO_DELETE_DEPLOYMENT":return e.set("deletingDeployment",null);default:return e}},templates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/deployments/FETCHING_TEMPLATES":return e.set("loading",!0).set("error","");case U:return e.set("loading",!1).set("list",Object(_.c)(t.templates.reduce((function(e,t){return e[t.name]=t.versions,e}),{})));case"app/deployments/FAILED_TO_FETCH_TEMPLATES":return e.set("loading",!1).set("error",t.error.message);default:return e}}}),$=Object(W.e)(Z,Object(W.d)(Object(W.a)(K.a)));n(114);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:$},r.a.createElement(V,null))),document.getElementById("root"))},83:function(e,t,n){e.exports=n(116)},93:function(e,t,n){},98:function(e,t,n){var a={"./ar":26,"./ar.js":26,"./az":27,"./az.js":27,"./be":28,"./be.js":28,"./bg":29,"./bg.js":29,"./bs":30,"./bs.js":30,"./ca":31,"./ca.js":31,"./cs":32,"./cs.js":32,"./cy":33,"./cy.js":33,"./da":34,"./da.js":34,"./de":35,"./de.js":35,"./el":36,"./el.js":36,"./en":20,"./en.js":20,"./es":37,"./es.js":37,"./et":38,"./et.js":38,"./eu":39,"./eu.js":39,"./fa":40,"./fa.js":40,"./fi":41,"./fi.js":41,"./fr":42,"./fr.js":42,"./hr":43,"./hr.js":43,"./hu":44,"./hu.js":44,"./id":45,"./id.js":45,"./it":46,"./it.js":46,"./ja":47,"./ja.js":47,"./ka":48,"./ka.js":48,"./ko":49,"./ko.js":49,"./lt":50,"./lt.js":50,"./lv":51,"./lv.js":51,"./mk":52,"./mk.js":52,"./mn":53,"./mn.js":53,"./ms":54,"./ms.js":54,"./nb_NO":55,"./nb_NO.js":55,"./nl":56,"./nl.js":56,"./pl":57,"./pl.js":57,"./pt":58,"./pt.js":58,"./pt_BR":59,"./pt_BR.js":59,"./ro":60,"./ro.js":60,"./ru":61,"./ru.js":61,"./se":62,"./se.js":62,"./sl":63,"./sl.js":63,"./sq":64,"./sq.js":64,"./sr":65,"./sr.js":65,"./sv":66,"./sv.js":66,"./tr":67,"./tr.js":67,"./ua":68,"./ua.js":68,"./uk":69,"./uk.js":69,"./vi":70,"./vi.js":70,"./zh":71,"./zh.js":71,"./zh_TW":72,"./zh_TW.js":72};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=98}},[[83,1,2]]]);
//# sourceMappingURL=main.0204cc74.chunk.js.map