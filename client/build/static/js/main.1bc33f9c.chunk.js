(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},111:function(e,t,n){},113:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(9),c=n(8),l=n.n(c),o=(n(93),n(10)),u=n.n(o),i=n(15),p=n(13),m=n(78),d=n.n(m),E={url:"required|string|min:8|url",templateName:"required|string",version:"required|string"},f=function(e){var t=new d.a(e,E);return t.passes()?{valid:!0}:{valid:!1,errors:t.errors}},j=n(14),y=n(131),O=n(132),b=n(133),v=n(134),g=n(135),D=n(136),T=n(137),h=(n(101),n(11)),_="app/deployments/LOAD_DEPLOYMENTS",L="app/deployments/DEPLOYMENT_ADDED",N=function(){return{type:"app/deployments/FETCHING_DEPLOYMENTS"}},k=function(e){return{type:_,deployments:e}},S=function(e){return{type:"app/deployments/FAILED_TO_FETCH_DEPLOYMENTS",error:e}},A=function(e){return{type:"app/deployments/DELETING_DEPLOYMENT",deploymentId:e}},M=function(){return{type:"app/deployments/DEPLOYMENT_DELETED"}},P=function(){return{type:"app/deployments/FAILED_TO_DELETE_DEPLOYMENT"}};var w=function(){var e=Object(r.useState)(""),t=Object(p.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)([]),o=Object(p.a)(l,2),m=o[0],d=o[1],E=Object(r.useState)(""),_=Object(p.a)(E,2),N=_[0],k=_[1],S=Object(r.useState)([]),A=Object(p.a)(S,2),M=A[0],P=A[1],w=Object(r.useState)(""),x=Object(p.a)(w,2),C=x[0],I=x[1],F=Object(s.c)((function(e){return{templatesLoading:e.deployments.get("loading"),templates:e.templates.get("list",Object(h.b)())}})),Y=(F.templatesLoading,F.templates),G=Object(s.b)();Object(r.useEffect)((function(){var e=Object.keys((Y||Object(h.b)()).toJS());d((function(){return e})),k((function(){return e[0]}));var t=Y.get(e[0],Object(h.a)()).toJS();P((function(){return t})),I((function(){return t[0]}))}),[Y]);var H=Object(r.useRef)(null),R=Object(r.useState)({url:""}),U=Object(p.a)(R,2),z=U[0],q=U[1],J=function(){var e=Object(i.a)(u.a.mark((function e(t){var r,a,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a=f(r={url:n,templateName:N,version:C})).valid){e.next=21;break}return q((function(){return{url:""}})),G({type:"app/deployments/ADDING_DEPLOYMENT"}),e.prev=6,e.next=9,fetch("".concat("","/api/deployments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 9:return s=e.sent,e.next=12,s.json();case 12:l=e.sent,200!==s.status?Object(j.b)(l.message):"SUCCESS"===l.status?(Object(j.b)("Deployment added successfully!"),G((o=l.data,{type:L,deployment:o})),c(""),k(m[0]),I(M[0])):(Object(j.b)(l.message),G({type:"app/deployments/FAILED_TO_ADD_DEPLOYMENT"})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),G({type:"app/deployments/FAILED_TO_ADD_DEPLOYMENT"});case 19:e.next=23;break;case 21:q((function(){return a.errors.errors})),a.errors&&a.errors.hasOwnProperty("url")&&null!==H.current&&H.current.focus();case 23:case"end":return e.stop()}var o}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"deployment-form"},a.a.createElement(y.a,{onSubmit:J},a.a.createElement(O.a,{row:!0},a.a.createElement(b.a,{for:"url",sm:2},"URL"),a.a.createElement(v.a,{sm:10},a.a.createElement(g.a,{type:"text",invalid:z&&!!z.url,placeholder:"Enter URL",innerRef:H,name:"url",value:n,onChange:function(e){return c(e.target.value)}}),a.a.createElement(D.a,null,z.url))),a.a.createElement(O.a,{row:!0},a.a.createElement(b.a,{for:"templateName",sm:2},"Template Name"),a.a.createElement(v.a,{sm:10},a.a.createElement(g.a,{type:"select",name:"templateName",value:N,onChange:function(e){return k(e.target.value)}},m.map((function(e){return a.a.createElement("option",{key:e},e)}))))),a.a.createElement(O.a,{row:!0},a.a.createElement(b.a,{for:"version",sm:2},"Version"),a.a.createElement(v.a,{sm:10},a.a.createElement(g.a,{type:"select",name:"version",value:C,onChange:function(e){return I(e.target.value)}},M.map((function(e){return a.a.createElement("option",{key:e},e)}))))),a.a.createElement(T.a,{type:"submit",color:"info"},"Add")))},x=n(138),C=n(141),I=n(139),F=n(140),Y=(n(102),n(79)),G=n.n(Y);var H=function(){var e=Object(s.c)((function(e){return{loading:e.deployments.get("loading"),list:e.deployments.get("list")}})),t=e.loading,n=e.list,c=Object(r.useState)(!1),l=Object(p.a)(c,2),o=l[0],m=l[1],d=Object(r.useState)(""),E=Object(p.a)(d,2),f=E[0],y=E[1],O=Object(s.c)((function(e){return e.deployments.get("deletingDeployment")})),b=function(){o||y(""),m(!o)},v=Object(r.useRef)();Object(r.useEffect)((function(){f&&!O&&v.current!==O&&o&&b(),v.current=O}),[O,f]);var g=Object(s.b)();return a.a.createElement("div",{className:"deployment-list"},t&&a.a.createElement("div",{className:"loader"}),!t&&a.a.createElement(x.a,{striped:!0,bordered:!0},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"URL"),a.a.createElement("th",null,"Template Name"),a.a.createElement("th",null,"Version"),a.a.createElement("th",null,"DeployedAt"),a.a.createElement("th",null))),a.a.createElement("tbody",null,n.map((function(e){return a.a.createElement("tr",{key:e.get("_id")},a.a.createElement("td",null,e.get("url")),a.a.createElement("td",null,e.get("templateName")),a.a.createElement("td",null,e.get("version")),a.a.createElement("td",null,new Date(e.get("deployedAt")).toUTCString()),a.a.createElement("td",null,a.a.createElement(G.a,{className:"delete-icon",onClick:function(){b(),setTimeout((function(){return y((function(){return e.get("_id")}))}),500)}})))})))),a.a.createElement(C.a,{isOpen:o,toggle:b},a.a.createElement(I.a,null,"Are you sure you want to delete this deployment ?"),a.a.createElement(F.a,null,a.a.createElement(T.a,{color:"primary",disabled:O,onClick:function(){var e;f&&g((e=f,function(){var t=Object(i.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(A(e)),t.prev=1,t.next=4,fetch("".concat("","/api/deployments/").concat(e),{method:"DELETE"});case 4:return r=t.sent,t.next=7,r.json();case 7:if("SUCCESS"!==(a=t.sent).status){t.next=12;break}n(M()),t.next=13;break;case 12:throw new Error(a.message);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),Object(j.b)(t.t0.message),n(P());case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()))}},"Confirm")," ",a.a.createElement(T.a,{color:"secondary",disabled:O,onClick:b},"Cancel"))))};n(111);var R=function(){return a.a.createElement("div",{className:"app-header"},a.a.createElement("header",null,"Deployment Version Logs"))},U=(n(112),"app/deployments/LOAD_TEMPLATES"),z=function(){return{type:"app/deployments/FETCHING_TEMPLATES"}},q=function(e){return{type:U,templates:e}},J=function(e){return{type:"app/deployments/FAILED_TO_FETCH_TEMPLATES",error:e}};n(113);var B=function(){var e=Object(s.b)();return Object(r.useEffect)((function(){e(function(){var e=Object(i.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(z()),e.prev=1,e.next=4,fetch("".concat("","/api/templates"));case 4:return r=e.sent,e.next=7,r.json();case 7:a=e.sent,t(q(a.templates)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(J(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),e(function(){var e=Object(i.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(N()),e.prev=1,e.next=4,fetch("".concat("","/api/deployments"));case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,t(k(r.deployments)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),Object(j.b)(e.t0.message),t(S(e.t0));case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]),a.a.createElement("div",{className:"App"},a.a.createElement(R,null),a.a.createElement(j.a,null),a.a.createElement(w,null),a.a.createElement(H,null))},V=n(17),W=n(80),K=Object(h.c)({list:[],loading:!0,error:"",adding:!1,deletingDeployment:null});var Q=Object(h.c)({list:[],loading:!0,error:""});var X=Object(V.c)({deployments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/deployments/FETCHING_DEPLOYMENTS":return e.set("loading",!0).set("error","");case _:return e.set("loading",!1).set("list",Object(h.c)(t.deployments));case"app/deployments/FAILED_TO_FETCH_DEPLOYMENTS":return e.set("loading",!1).set("error",t.error.message);case"app/deployments/ADDING_DEPLOYMENT":return e.set("adding",!0);case L:return e.set("adding",!1).update("list",(function(e){return e.unshift(Object(h.c)(t.deployment))}));case"app/deployments/FAILED_TO_ADD_DEPLOYMENT":return e.set("adding",!1);case"app/deployments/DELETING_DEPLOYMENT":return e.set("deletingDeployment",t.deploymentId);case"app/deployments/DEPLOYMENT_DELETED":var n=e.get("deletingDeployment");return e.set("deletingDeployment",null).update("list",(function(e){return e.filter((function(e){return e.get("_id")!==n}))}));case"app/deployments/FAILED_TO_DELETE_DEPLOYMENT":return e.set("deletingDeployment",null);default:return e}},templates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/deployments/FETCHING_TEMPLATES":return e.set("loading",!0).set("error","");case U:return e.set("loading",!1).set("list",Object(h.c)(t.templates.reduce((function(e,t){return e[t.name]=t.versions,e}),{})));case"app/deployments/FAILED_TO_FETCH_TEMPLATES":return e.set("loading",!1).set("error",t.error.message);default:return e}}}),Z=Object(V.e)(X,Object(V.d)(Object(V.a)(W.a)));n(114);l.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(s.a,{store:Z},a.a.createElement(B,null))),document.getElementById("root"))},83:function(e,t,n){e.exports=n(116)},93:function(e,t,n){},98:function(e,t,n){var r={"./ar":26,"./ar.js":26,"./az":27,"./az.js":27,"./be":28,"./be.js":28,"./bg":29,"./bg.js":29,"./bs":30,"./bs.js":30,"./ca":31,"./ca.js":31,"./cs":32,"./cs.js":32,"./cy":33,"./cy.js":33,"./da":34,"./da.js":34,"./de":35,"./de.js":35,"./el":36,"./el.js":36,"./en":20,"./en.js":20,"./es":37,"./es.js":37,"./et":38,"./et.js":38,"./eu":39,"./eu.js":39,"./fa":40,"./fa.js":40,"./fi":41,"./fi.js":41,"./fr":42,"./fr.js":42,"./hr":43,"./hr.js":43,"./hu":44,"./hu.js":44,"./id":45,"./id.js":45,"./it":46,"./it.js":46,"./ja":47,"./ja.js":47,"./ka":48,"./ka.js":48,"./ko":49,"./ko.js":49,"./lt":50,"./lt.js":50,"./lv":51,"./lv.js":51,"./mk":52,"./mk.js":52,"./mn":53,"./mn.js":53,"./ms":54,"./ms.js":54,"./nb_NO":55,"./nb_NO.js":55,"./nl":56,"./nl.js":56,"./pl":57,"./pl.js":57,"./pt":58,"./pt.js":58,"./pt_BR":59,"./pt_BR.js":59,"./ro":60,"./ro.js":60,"./ru":61,"./ru.js":61,"./se":62,"./se.js":62,"./sl":63,"./sl.js":63,"./sq":64,"./sq.js":64,"./sr":65,"./sr.js":65,"./sv":66,"./sv.js":66,"./tr":67,"./tr.js":67,"./ua":68,"./ua.js":68,"./uk":69,"./uk.js":69,"./vi":70,"./vi.js":70,"./zh":71,"./zh.js":71,"./zh_TW":72,"./zh_TW.js":72};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=98}},[[83,1,2]]]);
//# sourceMappingURL=main.1bc33f9c.chunk.js.map